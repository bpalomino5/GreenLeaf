(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{238:function(e,t,n){e.exports=n(421)},243:function(e,t,n){},245:function(e,t,n){},247:function(e,t,n){},421:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"auth",function(){return x}),n.d(a,"db",function(){return P});var r={};n.r(r),n.d(r,"doCreateUserWithEmailAndPassword",function(){return k}),n.d(r,"doSignInWithEmailAndPassword",function(){return A}),n.d(r,"doSignOut",function(){return I}),n.d(r,"doPasswordReset",function(){return M}),n.d(r,"doPasswordUpdate",function(){return U});var l={};n.r(l),n.d(l,"getOtherUsers",function(){return D}),n.d(l,"getMyUser",function(){return H}),n.d(l,"getAllBills",function(){return L}),n.d(l,"editBill",function(){return z}),n.d(l,"addBill",function(){return W});var c=n(0),o=n.n(c),u=n(62),i=n.n(u),s=(n(243),n(25)),m=n(26),d=n(28),h=n(27),p=n(29),f=(n(245),n(97)),b=n(46),g=(n(247),n(439)),E=n(438),v=n(206),y=n(431),C=n(442),O=n(437),j=n(72),w=n.n(j),S=(n(256),n(258),{apiKey:"AIzaSyAAZri65JCYTUIjvVgU6mB-tXz118lUhbQ",authDomain:"greenleaf-8aa9b.firebaseapp.com",databaseURL:"https://greenleaf-8aa9b.firebaseio.com",projectId:"greenleaf-8aa9b",storageBucket:"",messagingSenderId:"537893788938"});w.a.apps.length||w.a.initializeApp(S);var P=w.a.firestore(),x=w.a.auth(),k=function(e,t){return x.createUserWithEmailAndPassword(e,t)},A=function(e,t){return x.signInWithEmailAndPassword(e,t)},I=function(){return x.signOut()},M=function(e){return x.sendPasswordResetEmail(e)},U=function(e){return x.currentUser.updatePassword(e)},F=n(17),B=n.n(F),N=n(35),D=function(){var e=Object(N.a)(B.a.mark(function e(){var t;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,P.collection("users").get();case 3:return e.sent.forEach(function(e){e.get("uid")!==x.currentUser.uid&&t.push(e.data())}),e.abrupt("return",t);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(N.a)(B.a.mark(function e(){var t,n;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.collection("users").get();case 2:return t=e.sent,n=null,t.forEach(function(e){e.get("uid")===x.currentUser.uid&&(n=e.data())}),e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(N.a)(B.a.mark(function e(){var t,n,a,r,l;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,n=t.toLocaleString("en-us",{year:"numeric"}),a=t.toLocaleString("en-us",{month:"long"}),r=[],e.next=6,P.collection("years/".concat(n,"/months")).doc(a).get();case 6:if(!(l=e.sent).exists){e.next=11;break}return e.next=10,Promise.all(l.get("bills").map(function(){var e=Object(N.a)(B.a.mark(function e(t){var n;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.ref.get();case 2:n=e.sent,r.push({ref:t.ref,isPayed:t.isPayed,name:n.get("name"),mPayment:n.get("mPayment")});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(N.a)(B.a.mark(function e(t,n){return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.set({name:n.name},{merge:!0});case 2:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(N.a)(B.a.mark(function e(t,n){var a,r,l,c;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.collection("bills").add({name:t,mPayment:parseFloat(n)});case 2:a=e.sent,r=new Date,l=r.toLocaleString("en-us",{year:"numeric"}),c=r.toLocaleString("en-us",{month:"long"}),P.collection("years/".concat(l,"/months/").concat(c,"/bills")).add({isPayed:!1,ref:a});case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),R=n(441),G=function(e,t){return function(){return Object(b.a)({},e,t)}},J={email:"",password:"",error:null},V=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={},n.onSubmit=function(e){var t=n.state,a=t.email,l=t.password,c=n.props.history;r.doSignInWithEmailAndPassword(a,l).then(function(){n.setState(Object(f.a)({},J)),c.push("/dashboard")}).catch(function(e){n.setState(G("error",e))}),e.preventDefault()},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.email,a=t.password,r=t.error,l=""===a||""===n;return o.a.createElement("div",{className:"login-form"},o.a.createElement(g.a,{textAlign:"center",style:{height:"100%"},verticalAlign:"middle"},o.a.createElement(g.a.Column,{style:{maxWidth:450}},o.a.createElement(E.a,{as:"h2",color:"grey",textAlign:"center"},o.a.createElement(v.a,{name:"signup"})," Green Leaf"),o.a.createElement(y.a,{size:"large",onSubmit:this.onSubmit},o.a.createElement(C.a,{stacked:!0},o.a.createElement(y.a.Input,{value:n,onChange:function(t){return e.setState(G("email",t.target.value))},fluid:!0,icon:"user",iconPosition:"left",placeholder:"Email"}),o.a.createElement(y.a.Input,{fluid:!0,value:a,onChange:function(t){return e.setState(G("password",t.target.value))},icon:"lock",iconPosition:"left",placeholder:"Password",type:"password"}),o.a.createElement(O.a,{disabled:l,color:"green",fluid:!0,size:"large"},"Login"),r&&o.a.createElement("p",null,r.message))))))}}]),t}(c.Component),K=Object(R.a)(V),Q=function(){return o.a.createElement(O.a,{onClick:r.doSignOut},"Sign Out")},T=o.a.createContext(null),X=function(e){return function(t){var n=function(n){function r(){return Object(s.a)(this,r),Object(d.a)(this,Object(h.a)(r).apply(this,arguments))}return Object(p.a)(r,n),Object(m.a)(r,[{key:"componentDidMount",value:function(){var t=this;a.auth.onAuthStateChanged(function(n){e(n)||t.props.history.push("/")})}},{key:"render",value:function(){var e=this;return o.a.createElement(T.Consumer,null,function(n){return n?o.a.createElement(t,e.props):null})}}]),r}(c.Component);return Object(R.a)(n)}},Y=n(433),Z=n(435),q=function(e){var t=e.billItem,n=e.handleClose,a=e.handleFormChange,r=e.handleFormSubmit,l=e.detailModalOpen;return o.a.createElement(Y.a,{style:{height:"auto"},open:l,onClose:n,dimmer:"blurring",size:"mini",centered:!0},o.a.createElement(Y.a.Header,null,"Bill Details"),o.a.createElement(Y.a.Content,null,o.a.createElement(y.a,null,t&&o.a.createElement(y.a.Group,null,o.a.createElement(y.a.Input,{label:"Company Name",placeholder:"Name",value:t.name,onChange:a,name:"name",width:10}),o.a.createElement(y.a.Input,{label:"Monthly Payment",placeholder:"Value",name:"mPayment",value:t.mPayment,width:6,onChange:a})))),o.a.createElement(Y.a.Actions,null,o.a.createElement(O.a,{content:"Close",onClick:n}),o.a.createElement(O.a,{content:"Submit",onClick:r})))},$=function(e){var t=e.openDetails,n=e.toggleStatus,a=e.companyName,r=e.status,l=e.monthlyPayment;return o.a.createElement(Z.a.Row,{positive:r},o.a.createElement(Z.a.Cell,{selectable:!0,style:{paddingLeft:10},onClick:t},o.a.createElement("h4",null,a)),o.a.createElement(Z.a.Cell,{collapsing:!0,negative:!r,textAlign:"center",selectable:!0,onClick:n},r?o.a.createElement(v.a,{name:"checkmark"}):o.a.createElement(v.a,{name:"close"})),o.a.createElement(Z.a.Cell,{collapsing:!0,textAlign:"center"},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en-us";return new Intl.NumberFormat(n,{style:"currency",currency:t}).format(e)}(l)),o.a.createElement(Z.a.Cell,{collapsing:!0,textAlign:"center"},o.a.createElement(O.a,{content:"Pay"})))},_=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={detailModalOpen:!1,index:0,billItem:null},n.toggleStatus=function(e){var t=n.props.bills;t[e].isPayed=!t[e].isPayed,n.setState({bills:t})},n.openDetails=function(e){var t=n.props.bills;n.setState({detailModalOpen:!0,index:e,billItem:t[e]})},n.handleClose=function(){return n.setState({detailModalOpen:!1})},n.handleFormChange=function(e,t){var a=t.name,r=t.value;return n.setState(function(e){return{billItem:Object(f.a)({},e.billItem,Object(b.a)({},a,r))}})},n.handleFormSubmit=Object(N.a)(B.a.mark(function e(){var t,a,r,c;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.bills,a=n.state,r=a.index,c=a.billItem,t[r]=c,e.next=5,l.editBill(t[r].ref,c);case 5:n.handleClose();case 6:case"end":return e.stop()}},e,this)})),n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.detailModalOpen,a=t.billItem,r=this.props.bills;return o.a.createElement(Z.a,{celled:!0},o.a.createElement(Z.a.Header,null,o.a.createElement(Z.a.Row,null,o.a.createElement(Z.a.HeaderCell,null,"Bill"),o.a.createElement(Z.a.HeaderCell,null,"Status"),o.a.createElement(Z.a.HeaderCell,null,"Monthly Payment"),o.a.createElement(Z.a.HeaderCell,null,"Make Payment"))),o.a.createElement(Z.a.Body,null,r.map(function(t,n){return o.a.createElement($,{openDetails:function(){return e.openDetails(n)},toggleStatus:function(){return e.toggleStatus(n)},companyName:t.name,status:t.isPayed,monthlyPayment:t.mPayment})})),o.a.createElement(q,{detailModalOpen:n,billItem:a,handleClose:this.handleClose,handleFormChange:this.handleFormChange,handleFormSubmit:this.handleFormSubmit}))}}]),t}(c.Component),ee=n(436),te=n(434),ne=[{key:1,text:"Add Bill",value:1}],ae=function(e){var t=e.addModalOpen,n=e.handleClose,a=e.handleFormSubmit,r=e.handleFormChange,l=e.cName,c=e.mPayment;return o.a.createElement(Y.a,{style:{height:"auto"},open:t,onClose:n,dimmer:"blurring",size:"mini",centered:!0},o.a.createElement(Y.a.Header,null,"Add Bill"),o.a.createElement(Y.a.Content,null,o.a.createElement(y.a,{onSubmit:a},o.a.createElement(y.a.Group,null,o.a.createElement(y.a.Input,{label:"Company Name",placeholder:"Name",value:l,name:"cName",onChange:r,width:6}),o.a.createElement(y.a.Input,{label:"Monthly Payment",placeholder:"Value",value:c,width:6,name:"mPayment",onChange:r})))),o.a.createElement(Y.a.Actions,null,o.a.createElement(O.a,{content:"Submit",onClick:a})))},re=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={addModalOpen:!1,cName:"",mPayment:""},n.handleFormChange=function(e,t){var a=t.name,r=t.value;return n.setState(Object(b.a)({},a,r))},n.handleFormSubmit=function(){var e=n.state,t=e.cName,a=e.mPayment;l.addBill(t,a),n.setState({cName:"",mPayment:""}),n.handleClose()},n.handleChange=function(e,t){1===t.value&&n.setState({addModalOpen:!0})},n.handleClose=function(){return n.setState({addModalOpen:!1})},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.addModalOpen,n=e.cName,a=e.mPayment;return o.a.createElement(ee.a,{raised:!0,fluid:!0},o.a.createElement(ee.a.Content,null,o.a.createElement(ee.a.Header,null,"Bill Activity")),o.a.createElement(ee.a.Content,null,o.a.createElement(te.a,{text:"Options",button:!0,onChange:this.handleChange,options:ne}),o.a.createElement(ae,{addModalOpen:t,handleClose:this.handleClose,handleFormSubmit:this.handleFormSubmit,handleFormChange:this.handleFormChange,cName:n,mPayment:a})))}}]),t}(c.Component),le=function(e){var t=e.profile,n=e.email;return o.a.createElement(ee.a,{color:"blue",raised:!0},o.a.createElement(ee.a.Content,null,o.a.createElement(ee.a.Header,null,t.name),o.a.createElement(ee.a.Meta,null,n),o.a.createElement(ee.a.Meta,null,"Current User"),o.a.createElement(ee.a.Description,null,t.occupation)),o.a.createElement(ee.a.Content,{extra:!0},o.a.createElement(Q,null)))},ce=function(e){var t=e.users;return o.a.createElement(ee.a,{color:"green",raised:!0},o.a.createElement(ee.a.Content,null,o.a.createElement(ee.a.Header,null,"Family")),t.map(function(e){return o.a.createElement(ee.a.Content,{header:e.name,meta:e.member,description:e.occupation})}))},oe=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={profile:null,users:[],bills:[]},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(N.a)(B.a.mark(function e(){return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,l.getMyUser();case 3:return e.t1=e.sent,e.next=6,l.getOtherUsers();case 6:return e.t2=e.sent,e.next=9,l.getAllBills();case 9:e.t3=e.sent,e.t4={profile:e.t1,users:e.t2,bills:e.t3},e.t0.setState.call(e.t0,e.t4);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.profile,n=e.users,a=e.bills;return o.a.createElement("div",null,o.a.createElement(g.a,{columns:2,divided:!0,padded:!0},o.a.createElement(g.a.Column,{width:4},o.a.createElement(T.Consumer,null,function(e){return o.a.createElement("div",null,t&&o.a.createElement(le,{email:e.email,profile:t}),o.a.createElement(ce,{users:n}))})),o.a.createElement(g.a.Column,{width:6,computer:11},o.a.createElement(re,null),o.a.createElement(_,{bills:a}))))}}]),t}(c.Component),ue=X(function(e){return!!e})(oe),ie=n(440),se=n(430),me=function(e){return function(t){function n(e){var t;return Object(s.a)(this,n),(t=Object(d.a)(this,Object(h.a)(n).call(this,e))).state={authUser:null},t}return Object(p.a)(n,t),Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;a.auth.onAuthStateChanged(function(t){t?e.setState({authUser:t}):e.setState({authUser:null})})}},{key:"render",value:function(){var t=this.state.authUser;return o.a.createElement(T.Provider,{value:t},o.a.createElement(e,this.props))}}]),n}(c.Component)}(function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return o.a.createElement(ie.a,null,o.a.createElement(se.a,{exact:!0,path:"/",component:K}),o.a.createElement(se.a,{exact:!0,path:"/dashboard",component:ue}))}}]),t}(c.Component)),de=n(432);i.a.render(o.a.createElement(de.a,null,o.a.createElement(me,null)),document.getElementById("root"))}},[[238,2,1]]]);
//# sourceMappingURL=main.122960ed.chunk.js.map